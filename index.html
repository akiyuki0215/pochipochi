<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>åº—é ­å¯¾å¿œãƒŠãƒ“ï¼ˆMVPï¼‰</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;600;700&display=swap" rel="stylesheet">
<style>
body{font-family:"Noto Sans JP",sans-serif;background:#f8fafc;margin:0;color:#111827}
header{background:#004c99;color:#fff;padding:12px 16px;display:flex;justify-content:space-between;align-items:center}
.container{max-width:900px;margin:20px auto;padding:0 16px}
.btn{background:#e0e7ff;color:#1e3a8a;border:none;border-radius:8px;padding:8px 14px;margin:6px;cursor:pointer;font-weight:600}
.btn:hover{background:#c7d2fe}
.result{border:2px solid #cbd5e1;border-radius:8px;padding:10px;margin-top:8px;background:#fff}
.path{font-size:12px;color:#6b7280;margin-bottom:8px}
details{background:#fff;border:1px solid #d1d5db;border-radius:8px;margin-top:12px;padding:8px}
</style>
</head>
<body>
<header>
  <div>
    <div style="font-size:20px;font-weight:700;">åº—é ­å¯¾å¿œãƒŠãƒ“ï¼ˆMVPï¼‰</div>
    <div style="font-size:12px;">ãƒ¡ãƒ¼ã‚«ãƒ¼ãƒ»ä¿è¨¼ã®ãƒŠãƒ¬ãƒƒã‚¸ã‚’JSONã§ç®¡ç†ã—ã€èª°ã§ã‚‚åŒã˜åˆ¤æ–­ã‚’</div>
  </div>
  <a id="formLink" href="https://forms.gle/2Sq1DwiNAvbHcRzG9" target="_blank" rel="noopener" class="btn">âœ‰ï¸ æ„è¦‹ã‚’é€ã‚‹</a>
</header>

<main class="container">
  <div class="path" id="path">é€²è¡Œ: ãƒ¡ãƒ¼ã‚«ãƒ¼é¸æŠ</div>
  <div id="content">èª­ã¿è¾¼ã¿ä¸­...</div>
  <div style="margin-top:10px">
    <button class="btn" id="backBtn" style="display:none">â† æˆ»ã‚‹</button>
    <button class="btn" id="resetBtn">æœ€åˆã‹ã‚‰</button>
  </div>
  <details id="historyAcc">
    <summary>ğŸ•“ æ›´æ–°å±¥æ­´ï¼ˆã‚¿ãƒƒãƒ—ã§é–‹é–‰ï¼‰</summary>
    <p style="font-size:12px;color:#6b7280;">â€» ä»Šå¾Œã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ update_log.json ã‹ã‚‰èª­ã¿è¾¼ã¿ã¾ã™ã€‚</p>
  </details>
</main>

<script>
const FORM_URL = "https://forms.gle/2Sq1DwiNAvbHcRzG9";
let DATA=null; const state={history:[],current:"ãƒ¡ãƒ¼ã‚«ãƒ¼é¸æŠ"}; let FLOW={nodes:{}};

async function loadJSON(path,fallback){
  try{const res=await fetch(path,{cache:'no-store'});if(!res.ok)throw new Error(res.status);return await res.json();}
  catch(e){return fallback;}
}
function normalize(s){return String(s).replace(/\s+/g,' ').trim();}

function renderStart(){
  const c=document.getElementById("content");c.innerHTML="";
  [["å›½å†…ãƒ¡ãƒ¼ã‚«ãƒ¼",["NEC","Fujitsu","Dynabook","VAIO","Mouse Computer"]],
   ["æµ·å¤–ãƒ¡ãƒ¼ã‚«ãƒ¼",["ASUS","Dell","Lenovo","MSI"]],
   ["Surface",["Surface"]],
   ["Apple",["Apple"]]].forEach(([t,arr])=>{
    const h=document.createElement("h3");h.textContent=t;c.appendChild(h);
    arr.forEach(x=>{const b=document.createElement("button");b.className="btn";b.textContent=x;b.onclick=()=>{state.history.push({node:state.current,choice:x});state.current=x+"_first";render();};c.appendChild(b);});
  });
}

function render(){
  const c=document.getElementById("content");
  if(state.current==="ãƒ¡ãƒ¼ã‚«ãƒ¼é¸æŠ"){renderStart();document.getElementById("backBtn").style.display="none";return;}
  c.innerHTML="<div class='result'><h2>"+state.current+"</h2><p>è©³ç´°ã¯ data.json ã«åŸºã¥ãè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p></div>";
  document.getElementById("backBtn").style.display=state.history.length?"inline-block":"none";
}

document.getElementById("resetBtn").onclick=()=>{state.history=[];state.current="ãƒ¡ãƒ¼ã‚«ãƒ¼é¸æŠ";render();};
document.getElementById("backBtn").onclick=()=>{if(!state.history.length)return;const last=state.history.pop();state.current=last.node;render();};

(async()=>{DATA=await loadJSON("data.json",{});render();})();
</script>
</body>
</html>
