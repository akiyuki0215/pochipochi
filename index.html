<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>åº—é ­å¯¾å¿œãƒŠãƒ“ï¼ˆMVPï¼JSONç‰ˆï¼‰</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;600;700&family=Roboto:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{ --brand:#004c99; --brand-dark:#00396f; --bg:#f5f7fb; --text:#1b1f24; --muted:#505a66;
         --card:#ffffff; --border:#e3e7ef; --ok:#16a34a; --warn:#f59e0b; --ng:#ef4444; --info:#3b82f6; }
  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;background:linear-gradient(180deg,#f7fbff 0%, #eef3fa 100%);color:var(--text);
       font-family:"Noto Sans JP","Roboto",system-ui,-apple-system,Segoe UI,Helvetica,Arial,sans-serif;}
  .site-header{position:sticky;top:0;z-index:100;background:linear-gradient(90deg,var(--brand),var(--brand-dark));
               color:#fff;padding:14px 20px;box-shadow:0 4px 16px rgba(0,0,0,.08);}
  .site-header .title{font-size:20px;font-weight:700;letter-spacing:.02em}
  .site-header .subtitle{opacity:.9;font-size:12px;margin-top:2px}
  .container{max-width:980px;margin:28px auto;padding:0 16px}
  .card{background:var(--card);border:1px solid var(--border);border-radius:16px;
        box-shadow:0 6px 20px rgba(0,0,0,.06);padding:18px;margin-bottom:18px}
  .section{margin-top:8px}
  .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px 14px;min-width:140px;
       border:1px solid #cdd6e6;border-radius:12px;cursor:pointer;margin:8px 8px 0 0;
       background:linear-gradient(180deg,#ffffff 0%, #f3f6fb 100%);font-weight:600;color:#0f172a;transition:.18s ease;
       box-shadow:0 2px 6px rgba(2,6,23,.04)}
  .btn:hover{transform:translateY(-1px);box-shadow:0 8px 20px rgba(2,6,23,.08)}
  .btn.primary{border-color:#a8c6ff;background:linear-gradient(180deg,#e9f2ff 0%, #dbe9ff 100%)}
  .path{font-size:12px;color:var(--muted);margin-bottom:10px}
  .result{border:1px solid var(--border);border-radius:14px;padding:16px;background:#fcfffd}
  .result h2{margin:0 0 8px 0;font-size:18px}
  .result p{margin:6px 0}
  .result.ok{border-left:4px solid var(--ok)} .result.warn{border-left:4px solid var(--warn)}
  .result.ng{border-left:4px solid var(--ng)} .result.info{border-left:4px solid var(--info)}
  .controls{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  .ghost{background:#fff;border:1px dashed var(--border);color:var(--muted)}
  .note{font-size:12px;color:var(--muted);margin-top:8px}
  /* å±¥æ­´ */
  .history{overflow:hidden}
  .history h2{margin:0 0 10px 0;font-size:18px}
  table.log{width:100%;border-collapse:separate;border-spacing:0;border:1px solid var(--border);border-radius:12px;overflow:hidden}
  .log th,.log td{font-size:13px;padding:10px 12px;border-bottom:1px solid var(--border);text-align:left;vertical-align:top}
  .log thead th{background:#f0f5ff;color:#0f172a}
  .log tbody tr:hover{background:#fafcff}
  .pill{display:inline-block;border:1px solid var(--border);padding:2px 8px;border-radius:999px;font-size:12px;color:#334155}
  .pill.ok{border-color:#86efac;background:#ecfdf5} .pill.hold{border-color:#fde68a;background:#fffbeb}
  .pill.reject{border-color:#fecaca;background:#fff1f2}
  .log .small{color:#64748b;font-size:12px}
  .log-controls{display:flex;gap:8px;margin-top:10px}
</style>
</head>
<body>
<header class="site-header">
  <div class="title">åº—é ­å¯¾å¿œãƒŠãƒ“ï¼ˆMVPï¼‰</div>
  <div class="subtitle">ãƒ¡ãƒ¼ã‚«ãƒ¼ãƒ»ä¿è¨¼ã®ãƒŠãƒ¬ãƒƒã‚¸ã‚’JSONã§ç®¡ç†ã—ã€èª°ã§ã‚‚åŒã˜åˆ¤æ–­ã‚’</div>
</header>

<main class="container">
  <div class="card">
    <div class="path" id="path">é€²è¡Œ: ãƒ¡ãƒ¼ã‚«ãƒ¼é¸æŠ</div>
    <div id="content">èª­ã¿è¾¼ã¿ä¸­â€¦</div>
    <div class="controls">
      <button class="btn ghost" id="backBtn" style="display:none">â† ã²ã¨ã¤æˆ»ã‚‹</button>
      <button class="btn primary" id="resetBtn">æœ€åˆã‹ã‚‰</button>
    </div>
  </div>

  <section class="history card">
    <h2>ğŸ•“ æ›´æ–°å±¥æ­´</h2>
    <div class="log-controls">
      <button class="btn" id="showLatest">æœ€æ–°10ä»¶</button>
      <button class="btn" id="showAll">ã™ã¹ã¦è¡¨ç¤º</button>
    </div>
    <div id="logWrap" style="margin-top:10px"></div>
    <div class="note">â€» å±¥æ­´ã¯ <code>update_log.json</code> ã‚’èª­ã¿è¾¼ã‚“ã§è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚</div>
  </section>
</main>

<script>
const KANA = {"NEC":"ã‚¨ãƒŒã‚¤ãƒ¼ã‚·ãƒ¼","Fujitsu":"ãƒ•ã‚¸ãƒ„ã‚¦","Lenovo":"ãƒ¬ãƒãƒœ","Surface":"ã‚µãƒ¼ãƒ•ã‚§ã‚¹","Dell":"ãƒ‡ãƒ«",
              "ASUS":"ã‚¨ã‚¤ã‚¹ãƒ¼ã‚¹","Dynabook":"ãƒ€ã‚¤ãƒŠãƒ–ãƒƒã‚¯","MSI":"ã‚¨ãƒ ã‚¨ã‚¹ã‚¢ã‚¤","VAIO":"ãƒã‚¤ã‚ª","Mouse Computer":"ãƒã‚¦ã‚¹ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼","Apple":"ã‚¢ãƒƒãƒ—ãƒ«"};

let DATA = null;
const state = { history:[], current:"ãƒ¡ãƒ¼ã‚«ãƒ¼é¸æŠ" };

function kanaKey(label){ return (KANA[label]||label); }
function sortLabelsJa(arr){ return arr.slice().sort((a,b)=>kanaKey(a).localeCompare(kanaKey(b),'ja')); }

async function loadJSON(path, fallback){
  try{
    const res = await fetch(path, {cache:'no-store'});
    if(!res.ok) throw new Error("HTTP "+res.status);
    return await res.json();
  }catch(e){
    console.warn(path+" èª­è¾¼å¤±æ•—ã€‚çµ„ã¿è¾¼ã¿ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’ä½¿ç”¨ã—ã¾ã™ã€‚", e);
    return fallback;
  }
}

function renderPath(){
  const path = ["ãƒ¡ãƒ¼ã‚«ãƒ¼é¸æŠ", ...state.history.map(h=>h.choice||h.node)];
  document.getElementById('path').textContent = "é€²è¡Œ: " + path.join(" > ");
}

function sectionButtons(brands){
  const wrap = document.createElement('div'); wrap.className = "section card";
  sortLabelsJa(brands).forEach(name=>{
    const b = document.createElement('button');
    b.className = "btn"; b.textContent = name;
    b.onclick = ()=>{ state.history.push({node:state.current, choice:name}); state.current = name+"_first"; render(); };
    wrap.appendChild(b);
  });
  return wrap;
}

function renderStart(){
  const content = document.getElementById('content'); content.innerHTML = "";
  const groups = DATA.groups;
  content.appendChild(sectionButtons(groups.domestic));
  content.appendChild(sectionButtons(groups.overseas));
  content.appendChild(sectionButtons(groups.surface));
  content.appendChild(sectionButtons(groups.apple));
}

function makeResult(tone,title,lines){
  const wrap=document.createElement('div'); wrap.className=`result ${tone||'info'}`;
  const h=document.createElement('h2'); h.textContent=title||"çµæœ"; wrap.appendChild(h);
  (lines||[]).forEach(t=>{ const p=document.createElement('p'); p.textContent=t; wrap.appendChild(p); });
  return wrap;
}

function renderNode(node){
  const content = document.getElementById('content'); content.innerHTML="";
  if(node.type==="choice"){
    const q=document.createElement('h2'); q.textContent=node.question||"é¸æŠã—ã¦ãã ã•ã„"; content.appendChild(q);
    node.options.forEach(opt=>{
      const b=document.createElement('button'); b.className="btn primary"; b.textContent=opt.label;
      b.onclick=()=>{ state.history.push({node:state.current,choice:opt.label}); state.current=opt.next; render(); };
      content.appendChild(b);
    });
    const note=document.createElement('div'); note.className="note"; note.textContent="â€»ã€Œâ† ã²ã¨ã¤æˆ»ã‚‹ã€ã§å‰ã®è³ªå•ã«æˆ»ã‚Œã¾ã™"; content.appendChild(note);
  }else{
    content.appendChild(makeResult(node.tone, node.title, node.details));
  }
}

function buildFlowFromData(){
  const FLOW = { nodes:{} };
  DATA.groups.domestic.forEach(b=>{
    FLOW.nodes[`${b}_first`] = { type:"choice", question:`[${b}] ${DATA.text.domestic.q_hasWarranty}`, options:[
      {label:"ã¯ã„", next:`${b}_warranty_yes`},
      {label:"ã„ã„ãˆ", next:`${b}_nojima`}
    ]};
    FLOW.nodes[`${b}_warranty_yes`] = { type:"result", tone:"info", title:`[${b}] ${DATA.text.domestic.r_warranty_title}`, details: DATA.text.domestic.r_warranty_details };
    FLOW.nodes[`${b}_nojima`] = { type:"choice", question:`[${b}] ${DATA.text.common.q_hasNojima}`, options:[
      {label:"ã¯ã„", next:`${b}_nojima_yes`},
      {label:"ã„ã„ãˆ", next:`${b}_prepay`}
    ]};
    FLOW.nodes[`${b}_nojima_yes`] = { type:"result", tone:"ok", title:`[${b}] ${DATA.text.domestic.r_nojima_ok_title}`, details: DATA.text.domestic.r_nojima_ok_details };
    FLOW.nodes[`${b}_prepay`] = { type:"result", tone:"warn", title:`[${b}] ${DATA.text.domestic.r_prepay_title}`, details: DATA.text.domestic.r_prepay_details };
  });
  DATA.groups.overseas.forEach(b=>{
    FLOW.nodes[`${b}_first`] = { type:"choice", question:`[${b}] ${DATA.text.overseas.q_hasWarranty}`, options:[
      {label:"ã¯ã„", next:`${b}_nojima`},
      {label:"ã„ã„ãˆ", next:`${b}_warn_cost`}
    ]};
    FLOW.nodes[`${b}_warn_cost`] = { type:"result", tone:"warn", title:`[${b}] ${DATA.text.overseas.r_warn_title}`, details: DATA.text.overseas.r_warn_details };
    FLOW.nodes[`${b}_nojima`] = { type:"choice", question:`[${b}] ${DATA.text.common.q_hasNojima}`, options:[
      {label:"ã¯ã„", next:`${b}_store_ok`},
      {label:"ã„ã„ãˆ", next:`${b}_warn_cost`}
    ]};
    FLOW.nodes[`${b}_store_ok`] = { type:"result", tone:"ok", title:`[${b}] ${DATA.text.overseas.r_store_ok_title}`, details: DATA.text.overseas.r_store_ok_details };
  });
  DATA.groups.surface.forEach(b=>{
    FLOW.nodes[`${b}_first`] = { type:"result", tone:"ng", title:`[${b}] ${DATA.text.surface.r_title}`, details: DATA.text.surface.r_details };
  });
  DATA.groups.apple.forEach(b=>{
    FLOW.nodes[`${b}_first`] = { type:"choice", question:`[${b}] ${DATA.text.apple.q_hasWarranty}`, options:[
      {label:"ã¯ã„", next:`${b}_apple_direct`},
      {label:"ã„ã„ãˆ", next:`${b}_nojimaType`}
    ]};
    FLOW.nodes[`${b}_apple_direct`] = { type:"result", tone:"ng", title:`[${b}] ${DATA.text.apple.r_direct_title}`, details: DATA.text.apple.r_direct_details };
    FLOW.nodes[`${b}_nojimaType`] = { type:"choice", question:`[${b}] ${DATA.text.apple.q_nojima_type}`, options:[
      {label:DATA.text.apple.l_ultimate, next:`${b}_ultimate`},
      {label:DATA.text.apple.l_premium_plus, next:`${b}_after_date`},
      {label:DATA.text.apple.l_no_contract, next:`${b}_apple_direct2`}
    ]};
    FLOW.nodes[`${b}_ultimate`] = { type:"result", tone:"ok", title:`[${b}] ${DATA.text.apple.r_ultimate_title}`, details: DATA.text.apple.r_ultimate_details };
    FLOW.nodes[`${b}_after_date`] = { type:"choice", question:`[${b}] ${DATA.text.apple.q_after_date}`, options:[
      {label:"ã¯ã„", next:`${b}_uchi_flow`},
      {label:"ã„ã„ãˆ", next:`${b}_pre_flow`}
    ]};
    FLOW.nodes[`${b}_uchi_flow`] = { type:"result", tone:"warn", title:`[${b}] ${DATA.text.apple.r_uchi_title}`, details: DATA.text.apple.r_uchi_details };
    FLOW.nodes[`${b}_pre_flow`] = { type:"result", tone:"info", title:`[${b}] ${DATA.text.apple.r_pre_title}`, details: DATA.text.apple.r_pre_details };
    FLOW.nodes[`${b}_apple_direct2`] = { type:"result", tone:"info", title:`[${b}] ${DATA.text.apple.r_direct2_title}`, details: DATA.text.apple.r_direct2_details };
  });
  return FLOW;
}

function render(){
  renderPath();
  if(state.current==="ãƒ¡ãƒ¼ã‚«ãƒ¼é¸æŠ"){
    renderStart();
    document.getElementById('backBtn').style.display = state.history.length ? "inline-block" : "none";
    return;
  }
  const node = FLOW.nodes[state.current];
  const content = document.getElementById('content');
  if(!node){ content.textContent="è¨­å®šã‚¨ãƒ©ãƒ¼ï¼šãƒãƒ¼ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ - "+state.current; return; }
  renderNode(node);
  document.getElementById('backBtn').style.display = state.history.length ? "inline-block" : "none";
}

let FLOW = {nodes:{}};

document.getElementById('resetBtn').onclick = ()=>{ state.history=[]; state.current="ãƒ¡ãƒ¼ã‚«ãƒ¼é¸æŠ"; render(); };
document.getElementById('backBtn').onclick = ()=>{ if(!state.history.length) return; const last=state.history.pop(); state.current=last.node; render(); };

const STATUS_CLASS = {"æ¡ç”¨":"ok","ä¿ç•™":"hold","å´ä¸‹":"reject"};
async function loadLog(){
  try{
    const res = await fetch("update_log.json", {cache:"no-store"});
    if(!res.ok) throw new Error("HTTP "+res.status);
    return await res.json();
  }catch(e){
    console.warn("update_log.json èª­è¾¼å¤±æ•—", e);
    return [];
  }
}
function renderLogRows(rows){
  return rows.map(r=>{
    const pillClass = STATUS_CLASS[r.status] || "hold";
    const link = r.link ? `<div class="small"><a href="${r.link}" target="_blank" rel="noopener">å‚è€ƒè³‡æ–™</a></div>` : "";
    return `<tr>
      <td>${r.date||""}</td>
      <td>${r.store||""}</td>
      <td>${r.person||""}</td>
      <td>${r.maker||""}</td>
      <td>${r.summary||""}${link}</td>
      <td><span class="pill ${pillClass}">${r.status||"ä¿ç•™"}</span></td>
    </tr>`;
  }).join("");
}
function renderLogTable(rows){
  const header = `<table class="log"><thead><tr>
      <th style="width:110px">æ—¥ä»˜</th>
      <th style="width:140px">åº—èˆ—</th>
      <th style="width:120px">æ‹…å½“</th>
      <th style="width:120px">ãƒ¡ãƒ¼ã‚«ãƒ¼</th>
      <th>å¤‰æ›´å†…å®¹</th>
      <th style="width:90px">çŠ¶æ…‹</th>
    </tr></thead><tbody>`;
  const body = renderLogRows(rows);
  const footer = `</tbody></table>`;
  return header+body+footer;
}
function sortByDateDesc(rows){ return rows.slice().sort((a,b)=> (b.date||"").localeCompare(a.date||"")); }

(async ()=>{
  const fallbackData = {
    "groups": {
      "domestic": ["NEC","Fujitsu","Dynabook","VAIO","Mouse Computer"],
      "overseas": ["ASUS","Dell","Lenovo","MSI"],
      "surface": ["Surface"],
      "apple": ["Apple"]
    },
    "text": {
      "common": { "q_hasNojima": "ãƒã‚¸ãƒã®ä¿è¨¼ã«å…¥ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ" },
      "domestic": {
        "q_hasWarranty": "ãƒ¡ãƒ¼ã‚«ãƒ¼ä¿è¨¼ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
        "r_warranty_title": "ãƒ¡ãƒ¼ã‚«ãƒ¼ä¿è¨¼å†…ã®å—ä»˜ï¼ˆæ³¨æ„äº‹é …ã‚ã‚Šï¼‰",
        "r_warranty_details": [
          "ãƒ¡ãƒ¼ã‚«ãƒ¼ä¿è¨¼å†…ã¨ã—ã¦å—ä»˜ã—ã¾ã™ã€‚",
          "ãŸã ã—ã€ç—‡çŠ¶ãŒæœªå†ç¾ã®å ´åˆã‚„ãŠå®¢æ§˜éƒ½åˆã®ä¿®ç†ä¸­æ­¢æ™‚ã«ã¯ã€è¦‹ç©ã‚‚ã‚Šæ‰‹æ•°æ–™ãŒç™ºç”Ÿã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚",
          "ãã®æ—¨ã‚’ãŠä¼ãˆã®ã†ãˆã€å—ä»˜ã‚’é€²ã‚ã¦ãã ã•ã„ã€‚"
        ],
        "r_nojima_ok_title": "åº—èˆ—ã§ã®ä¿®ç†å—ä»˜ï¼šå¯èƒ½ï¼ˆãƒã‚¸ãƒä¿è¨¼ï¼‰",
        "r_nojima_ok_details": [
          "åº—èˆ—ã§ã®ä¿®ç†å—ä»˜ã¯å¯èƒ½ã§ã™ã€‚",
          "ä¿è¨¼å¯¾è±¡å¤–ã¨ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹æ—¨ã‚’ãŠä¼ãˆã—ã¤ã¤ã€å—ä»˜ã‚’é€²ã‚ã¦ãã ã•ã„ã€‚",
          "å‰å—ã‘é‡‘ã¯å¿…è¦ã‚ã‚Šã¾ã›ã‚“ã€‚"
        ],
        "r_prepay_title": "ä¿®ç†å—ä»˜ã¯å¯èƒ½ï¼ˆå‰å—ã‘é‡‘ï¼‰",
        "r_prepay_details": ["å‰å—ã‘é‡‘5,500å††ï¼ˆç¾é‡‘ã®ã¿ï¼‰ã‚’ã„ãŸã ã„ã¦ä¿®ç†å—ä»˜å¯èƒ½ã§ã™ã€‚"]
      },
      "overseas": {
        "q_hasWarranty": "ãƒ¡ãƒ¼ã‚«ãƒ¼ä¿è¨¼ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ",
        "r_warn_title": "ä¿®ç†å—ä»˜å¯èƒ½ï¼ˆæ³¨æ„å–šèµ·ï¼‰",
        "r_warn_details": [
          "ãƒã‚¸ãƒã§ã®ä¿®ç†å—ä»˜ã¯å¯èƒ½ã§ã™ã€‚",
          "ãŸã ã—ã€ãƒ¡ãƒ¼ã‚«ãƒ¼ã¸ç›´æ¥ä¾é ¼ã™ã‚‹ã‚ˆã‚Šä¿®ç†é‡‘é¡ãŒé«˜é¡ã«ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚",
          "ãŠå®¢æ§˜ã«ã”èª¬æ˜ã®ã†ãˆã€ã”åˆ¤æ–­ã‚’å°Šé‡ã—ã¦ãã ã•ã„ã€‚"
        ],
        "r_store_ok_title": "åº—èˆ—ã§ã®ä¿®ç†å—ä»˜ï¼šå¯¾å¿œå¯èƒ½",
        "r_store_ok_details": [
          "ãƒã‚¸ãƒä¿è¨¼åŠ å…¥ã®ãŸã‚ã€åº—èˆ—ã§ä¿®ç†å—ä»˜ãŒå¯èƒ½ã§ã™ã€‚",
          "è¦ç´„ã¨å¿…è¦æ›¸é¡ã‚’ç¢ºèªã®ã†ãˆã€å—ä»˜æ‰‹ç¶šãã‚’é€²ã‚ã¦ãã ã•ã„ã€‚"
        ]
      },
      "surface": {
        "r_title": "åº—èˆ—ä¿®ç†å—ä»˜ä¸å¯",
        "r_details": ["å½“åº—ã§ã®ä¿®ç†å—ä»˜ã¯ã§ãã¾ã›ã‚“ã€‚","ãŠå®¢æ§˜ã¨ãƒ¡ãƒ¼ã‚«ãƒ¼ã§ç›´æ¥ã‚„ã‚Šå–ã‚Šã«ãªã‚Šã¾ã™ã€‚"]
      },
      "apple": {
        "q_hasWarranty": "ãƒ¡ãƒ¼ã‚«ãƒ¼ä¿è¨¼ã«åŠ å…¥ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ",
        "r_direct_title": "åº—é ­å—ä»˜ä¸å¯ï¼ˆAppleã¸ç›´æ¥æ¡ˆå†…ï¼‰",
        "r_direct_details": ["ãƒã‚¸ãƒåº—é ­ã§ã®ä¿®ç†å—ä»˜ã¯ã§ãã¾ã›ã‚“ã€‚","Appleã¨ãŠå®¢æ§˜ã§ç›´æ¥ã®ä¿®ç†å¯¾å¿œã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚"],
        "q_nojima_type": "ãƒã‚¸ãƒä¿è¨¼ã®ã”åŠ å…¥çŠ¶æ³ã‚’é¸æŠã—ã¦ãã ã•ã„",
        "l_ultimate": "â‘  ã‚¢ãƒ«ãƒ†ã‚£ãƒ¡ãƒƒãƒˆä¿è¨¼ã«åŠ å…¥ã—ã¦ã„ã‚‹",
        "l_premium_plus": "â‘¡ ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ä¿è¨¼ãƒ—ãƒ©ã‚¹ã«åŠ å…¥ã—ã¦ã„ã‚‹",
        "l_no_contract": "â‘¢ ä¿è¨¼ã«å…¥ã£ã¦ã„ãªã„",
        "r_ultimate_title": "åº—èˆ—ã§ã®å•†å“äº¤æ›ãƒ»ãƒã‚¤ãƒ³ãƒˆãƒãƒƒã‚¯å¯¾å¿œï¼ˆã‚¢ãƒ«ãƒ†ã‚£ãƒ¡ãƒƒãƒˆä¿è¨¼ï¼‰",
        "r_ultimate_details": ["åº—èˆ—ã§ã®å•†å“äº¤æ›ã¾ãŸã¯ãƒã‚¤ãƒ³ãƒˆãƒãƒƒã‚¯å¯¾å¿œãŒå¯èƒ½ã§ã™ã€‚","ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã‚’ç¢ºèªã—ãªãŒã‚‰å¯¾å¿œã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚"],
        "q_after_date": "2023å¹´6æœˆ1æ—¥ä»¥é™ã«è³¼å…¥ã•ã‚Œã¦ã„ã¾ã™ã‹ï¼Ÿ",
        "r_uchi_title": "ä¿®ç†å—ä»˜ï¼ˆå†…è£½ä¿®ç†ã§å¯©æŸ»ã¸ï¼‰",
        "r_uchi_details": [
          "ææºä¿®ç†å…ˆã€Œã‚¦ãƒãƒ€ã‚¨ã‚¹ã‚³ã€ã¨ã®ä¿®ç†å¥‘ç´„ãŒçµ‚äº†ã—ãŸãŸã‚ã€ä¿®ç†ãŒã§ãã¾ã›ã‚“ã€‚",
          "ä¸€åº¦ã€å†…è£½ä¿®ç†ã«é€ã£ã¦å®‰å¿ƒä¿éšœçª“å£ã§å¯©æŸ»ã‚’è¡Œã†ãŸã‚ã€ä¿®ç†ã®å—ä»˜ã¯è¡Œã£ã¦ãã ã•ã„ã€‚"
        ],
        "r_pre_title": "åº—é ­ä¿®ç†å—ä»˜ï¼ˆãƒã‚¤ãƒ³ãƒˆãƒãƒƒã‚¯å¯¾å¿œï¼‰",
        "r_pre_details": [
          "åº—é ­ã§ã®ä¿®ç†å—ä»˜ã®ãƒ•ãƒ­ãƒ¼ã¯å¤‰ã‚ã‚Šã¾ã›ã‚“ã€‚",
          "Appleç”¨ã®è£½å“ä¿®ç†ç”³è¾¼æ›¸ã‚’è¨˜è¼‰ã®ä¸Šã€ä¿®ç†å—ä»˜ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚",
          "çµæœã¨ã—ã¦ãƒã‚¤ãƒ³ãƒˆãƒãƒƒã‚¯ã§ã®å¯¾å¿œã¨ãªã‚Šã¾ã™ã€‚",
          "ãŸã ã—ã€è‡ªç„¶æ•…éšœãƒ»ç‰©æã®å ´åˆã§è‹¥å¹²ãƒ•ãƒ­ãƒ¼ãŒå¤‰ã‚ã‚Šã¾ã™ã®ã§ã€ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ã®ç¢ºèªã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚"
        ],
        "r_direct2_title": "Appleã§ã®ç›´æ¥ä¿®ç†ã‚’ã”æ¡ˆå†…ï¼ˆæœªåŠ å…¥ï¼‰",
        "r_direct2_details": ["ãƒã‚¸ãƒä¿è¨¼ã«æœªåŠ å…¥ã®ãŸã‚ã€Appleã§ã®ç›´æ¥ä¿®ç†ã‚’ã”æ¡ˆå†…ãã ã•ã„ã€‚"]
      }
    }
  };
  DATA = await loadJSON("data.json", fallbackData);
  window.DATA = DATA;
  window.FLOW = buildFlowFromData();
  render();

  const log = sortByDateDesc(await loadLog());
  const wrap = document.getElementById("logWrap");
  function showLatest(){ wrap.innerHTML = renderLogTable(log.slice(0,10)); }
  function showAll(){ wrap.innerHTML = renderLogTable(log); }
  document.getElementById("showLatest").onclick = showLatest;
  document.getElementById("showAll").onclick = showAll;
  showLatest();
})();
</script>
</body>
</html>
